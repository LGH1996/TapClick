# TapClick (自动跳过广告)

### 基于Android无障碍服务开发的应用，可以实现但不局限于以下的功能，更多的功能可通过创建规则的方式实现:

① 自动跳过开屏广告；

② 自动关闭某些弹窗；

③ 自动点击应用安装；

④ ......

本软件需要长驻后台，但所占内存和耗电量极少，一般不会影响体验；

大部分应用的开屏广告都自带“跳过”关键字，本应用默认在发现“跳过”关键字时自动执行点击动作以达到跳过开屏广告的效果，但部分应用开屏广告的“跳过”控件无法自动检索，需要自行添加控件或坐标才有效果；

如果想要实现自动关闭某些弹窗或其他自动点击动作，请根据情况自定义规则，如添加关键字或添加坐标或添加控件，本应用不预设除跳过开屏广告之外的其他操作。

#### 1、主要功能：
* 跳过应用开屏广告，通过自定义规则实现自动化点击动作。

#### 2、实现原理：
* 通过无障碍服务，按需检索当前页面的控件，如果遇到疑似广告页面的“跳过”控件，则对该控件自动执行点击动作，以实现自动跳过开屏广告的需求。如果有自定义规则，则会在检索到符合规则的控件时自动对其执行点击动作。

#### 3、使用要求：
* 因为需要依赖无障碍服务实时监控页面的变化，所以需要常驻后台，确保不会被系统杀死，具体的保活方式，可根据手机型号自行百度。

#### 4、使用建议：
* 对于某些需要添加规则的页面，首选添加控件，其次才是添加坐标，坐标检索的效果远没有控件检索的效果好，其具有很大的不确定性，一般还要额外设置合适的点击次数和延迟点击时间，只有在页面无控件可用时才会考虑添加坐标。
* 对于系统应用、输入法应用、桌面应用，请谨慎选择是否开启或为其创建规则，因为这类应用会以各种形式侵入到当前页面中，如下拉菜单、音量条、语音助手、长按识别、输入键盘等，如果将其开启，会让程序误判为切换了应用，重新开始页面控件的检索，引起卡顿。

#
#### 5、如何创建坐标规则：
![添加坐标](https://gitee.com/lingh1996/ADGO/raw/master/coordinateAddMin.jpg "coordinateAddMin.jpg")
1) 当开屏广告出现时，点击“显示准心”，唤出准心；
2) 拖动准心使其对准“跳过”的坐标；
3) 点击“添加坐标”，完成坐标的添加，下次该页面出现时就会自动点击该坐标；
4) 长按悬浮窗，跳转到当前应用的规则管理页面，查看或编辑刚才创建的坐标规则；
5) 点击“退出”，退出创建规则；

#
#### 6、如何创建控件规则：
![添加控件](https://gitee.com/lingh1996/ADGO/raw/master/widgetAddMin.jpg "widgetAddMin.jpg")
1) 当开屏广告出现时，点击“显示布局”，唤出布局分析框；
2) 点击“跳过”控件以选中该控件；
3) 点击“添加控件”，完成控件的添加，下次该控件出现时就会自动点击该控件；
4) 长按悬浮窗，跳转到当前应用的规则管理页面，查看或编辑刚才创建的控件规则；
5) 点击“退出”，退出创建规则；

#
#### 7、规则管理中的各参数说明：
![参数说明](https://gitee.com/lingh1996/ADGO/raw/master/regularEditMin.jpg "regularEditMin.jpg")

###### 【基础功能设置】
* 当程序检测到用户切换应用时，就会触发对当前应用页面内容进行检索，在这里可以分别设置字词检索、坐标检索、控件检索的开关以及它们的总开关；
* 持续毫秒：当超过该选项设置的时间后，就会自动停止对页面内容检索；
* 保持：如果打开了该选项，则忽略持续时间中设置的数值，持续对页面内容检索；
* 提示：合理的设置各选项可以减少没必要的资源损耗或卡顿现象，同时还可以避免某些误判误点的情况；

###### 【字词检索管理】
* 当切换到该应用时，就会触发对页面内容进行检索，如果发现所定义的字词存在，则自动对该字词所在的控件执行点击动作；
* 检索字词：自定义需要检索的关键词，其格式可按如下编辑 ["跳过","进入","skip"]；
* 检索次数：在检索到指定的关键词个数后自动停止字词检索；
* 延迟点击：某些控件在出现时会处于不可用状态，需要延迟一定的时间后才能响应点击动作；
* 仅进行模拟点击：某些控件对无障碍服务的点击动作不生效，需要进行坐标的模拟点击，该选项仅在支持坐标点击的无障碍服务中生效；
* 注意：某些图片控件或自定义控件里的文字是检索不到的，如果想要自动点击这类的控件，可以选择添加控件或坐标的方式；
* 注意：如果存在多个关键词，则应按它们出现的频率由高到低排序；

###### 【坐标检索管理】
* 一个活动页面只可以添加一个坐标，在检测到该活动页面出现时就会对该坐标进行坐标模拟点击；
* Ｘ轴坐标：点击时屏幕X坐标；
* Ｙ轴坐标：点击时屏幕Y坐标；
* 延迟点击：某些控件在页面出现后延迟出现，需要设置延迟点击时间;
* 点击间隔：对一个坐标进行多次点击时，设置每次点击的间隔时间；
* 点击次数：对该坐标点击相应的次数后自动停止模拟点击；
* 注意：坐标模拟点击仅在开启支持坐标点击的无障碍服务生效，但部分机型会因为无障碍服务申请执行手势功能产生卡顿掉帧的情况，所以请根据情况开启合适的无障碍服务；

###### 【控件检索管理】
* 一个页面可以添加多个控件，检测到该页面出现时就会对该页面的控件进行检索，如果存在与该控件＂Id＂属性或＂Describe＂属性或＂Text＂属性或＂Bonus＂属性相同的控件，就会对其执行点击动作。
* 延迟点击：某些控件在出现时会处于不可点击状态，需要延迟一段时间后才能响应点击动作；
* 不允许重复点击：某些控件会不断地触发程序的点击动作，如果不希望此现象发生，可以尝试把该选项打开；
* 仅进行模拟点击：某些控件对无障碍服务的点击动作不生效，需要进行坐标的模拟点击，该选项仅在支持坐标点击的无障碍服务生效；
* 注意：如果该活动页面还存在其他＂Id＂属性或＂Describe＂属性或＂Text＂属性相同的控件，则可能被干扰导致误判而失效，如果出现这种情况，可以尝试把该控件的＂Id＂属性或＂Describe＂属性或＂Text＂属性删除，只留下＂Bonus＂属性作为该控件的唯一标识；

#
#### 8、常见问题

###### 问：为什么添加控件后没有效果？
* 相应的检索开关没有开启，设置的检索时间过短；
* 该控件可能手动点击也是没效果的，无解决办法；
* 该控件刚出现时可能还没有初始化点击事件，需要设置延迟点击时间；
* 该控件自身的点击事件是没有效果的，需要开启 “仅进行模拟点击”；
* 存在与该控件＂Id＂属性或＂Describe＂属性或＂Text＂属性相同的其他控件，导致识别错误，点击了错误的控件，可尝试依次删除该控件的＂Id＂属性或＂Describe＂属性或＂Text＂属性，以缩小查找范围。

###### 问：为什么添加控件后只会点击一次或几次，后面就没效果了？
* 控件规则里的 “不允许重复点击” 选项还开着，这会导致每次打开控件所在页面时都只会触发一次点击，可把该选项关闭；
* 规则 “基础功能设置” 里的检索时间过短，超过时间后停止了检索功能，可设置更长的检索时间或把 “持续” 选项打开；

###### 问：为什么完全没有效果？
* 无障碍服务未开启；
* 手机安全隐私功能导致未能获取到完整的应用列表，导致无法使用，可解除相关限制后重启无障碍服务；

###### 问：为什么部分应用添加规则按钮置灰，无法添加规则？
* 手机安全隐私功能导致未能获取到该应用的包名，程序无法识别该应用，可解除相关限制后重启无障碍服务；

###### 问：为什么添加的规则时好时坏，具有不确定性？
* 因为活动名有可能识别为桌面或SystemUI的活动名（系统bug，无解），与规则里的活动名不一致无法触发动作，可对比已添加规则的活动名与未生效时的活动名是否一致，不一致的话再添加一次即可。

#### 9、加入群聊：
#####
![QQ群二维码，截图后扫一扫](https://gitee.com/lingh1996/ADGO/raw/master/groupChat.jpg "groupChat.jpg")

